<!DOCTYPE html><html lang="ko"><head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">






  

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ejpark78.github.io","root":"/","scheme":"Gemini","version":"8.0.0-rc.5","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false};
  </script>

  <meta name="description" content="아래 내용 정리 아래 사이트에 정리를 너무 잘해놔서, 나중에 다시 찾아볼 내용만 간추린다.  아리수 [쿠버네티스 입문 정리](https://kok202.tistory.com/category/[개발] 운영/Kubernetes)   책 관련 링크  repo repo, arisu 정오표 아리수   쿠버네티스 아키텍쳐  출처: 쿠버네티스 입문 정리 - 00 -">
<meta property="og:type" content="article">
<meta property="og:title" content="쿠버네티스 입문 2019">
<meta property="og:url" content="https://ejpark78.github.io/ckf3rmlfx003mk78obb4z6bhs.html">
<meta property="og:site_name" content="오늘은 뭘 배우셨나요?">
<meta property="og:description" content="아래 내용 정리 아래 사이트에 정리를 너무 잘해놔서, 나중에 다시 찾아볼 내용만 간추린다.  아리수 [쿠버네티스 입문 정리](https://kok202.tistory.com/category/[개발] 운영/Kubernetes)   책 관련 링크  repo repo, arisu 정오표 아리수   쿠버네티스 아키텍쳐  출처: 쿠버네티스 입문 정리 - 00 -">
<meta property="og:locale">
<meta property="article:published_time" content="2020-08-25T02:32:39.000Z">
<meta property="article:modified_time" content="2020-08-28T20:51:28.140Z">
<meta property="article:author" content="Park Eunjin">
<meta property="article:tag" content="쿠버네티스 입문">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://ejpark78.github.io/ckf3rmlfx003mk78obb4z6bhs.html">


<script data-pjax="" class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'study'
  };
</script>

  <title>쿠버네티스 입문 2019 | 오늘은 뭘 배우셨나요?</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

<script>function loadCss(l){var d=document,h=d.head,s=d.createElement('link');s.rel='stylesheet';s.href=l;!function e(f){if (d.body)return f();setTimeout(function(){e(f)})}(function(){h.appendChild(s);});}loadCss('/style.css');loadCss('//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css');loadCss('//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css');</script><noscript><link rel="stylesheet" href="/style.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"></noscript></head>

<body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="headband"></div>

  <main class="main">
    <header class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">오늘은 뭘 배우셨나요?</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">나도 블로그가 있다!!!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>홈</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>태그<span class="badge">60</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>카테고리<span class="badge">63</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>아카이브<span class="badge">53</span></a>

  </li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          목차
        </li>
        <li class="sidebar-nav-overview">
          흝어보기
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%95%84%EB%9E%98-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC"><span class="nav-number">1.</span> <span class="nav-text"> 아래 내용 정리</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%B1%85-%EA%B4%80%EB%A0%A8-%EB%A7%81%ED%81%AC"><span class="nav-number">2.</span> <span class="nav-text"> 책 관련 링크</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90"><span class="nav-number">3.</span> <span class="nav-text"> 쿠버네티스 아키텍쳐</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%84%A4%EC%B9%98"><span class="nav-number">4.</span> <span class="nav-text"> 설치</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%ED%8C%8C%EB%93%9C"><span class="nav-number">5.</span> <span class="nav-text"> 파드</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pod-sample"><span class="nav-number">5.1.</span> <span class="nav-text"> Pod sample</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%8C%8C%EB%93%9C%EC%9D%98-%EC%83%9D%EB%AA%85%EC%A3%BC%EA%B8%B0"><span class="nav-number">5.2.</span> <span class="nav-text"> 파드의 생명주기</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%8C%8C%EB%93%9C%EC%9D%98-%EC%BB%A8%EB%94%94%EC%85%98-%ED%83%80%EC%9E%85"><span class="nav-number">5.3.</span> <span class="nav-text"> 파드의 컨디션 타입</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%8C%8C%EB%93%9C-%EC%95%88%EC%9D%98-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%A7%84%EB%8B%A8%ED%95%98%EA%B8%B0"><span class="nav-number">5.4.</span> <span class="nav-text"> 파드 안의 컨테이너 진단하기</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%8C%8C%EB%93%9C-%EC%95%88%EC%9D%98-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%A7%84%EB%8B%A8%ED%95%98%EA%B8%B0-%ED%95%B8%EB%93%A4%EB%9F%AC"><span class="nav-number">5.5.</span> <span class="nav-text"> 파드 안의 컨테이너 진단하기 핸들러</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pause-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88"><span class="nav-number">5.6.</span> <span class="nav-text"> Pause 컨테이너</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%8A%A4%ED%83%9C%ED%8B%B1-%ED%8C%8C%EB%93%9C"><span class="nav-number">5.7.</span> <span class="nav-text"> 스태틱 파드</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%8C%8C%EB%93%9C%EC%9D%98-%EA%B5%AC%EC%84%B1-%ED%8C%A8%ED%84%B4"><span class="nav-number">5.8.</span> <span class="nav-text"> 파드의 구성 패턴</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%B0%B8%EA%B3%A0"><span class="nav-number">6.</span> <span class="nav-text"> 참고</span></a></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Park Eunjin</p>
  <div class="site-description" itemprop="description">적자생존!</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">53</span>
          <span class="site-state-item-name">포스트</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">63</span>
        <span class="site-state-item-name">카테고리</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">60</span>
        <span class="site-state-item-name">태그</span></a>
      </div>
  </nav>
</div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

    
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="study">
    <link itemprop="mainEntityOfPage" href="https://ejpark78.github.io/ckf3rmlfx003mk78obb4z6bhs.html">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Park Eunjin">
      <meta itemprop="description" content="적자생존!">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="오늘은 뭘 배우셨나요?">
    </span>

    
    
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          쿠버네티스 입문 2019
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2020-08-25 11:32:39" itemprop="dateCreated datePublished" datetime="2020-08-25T11:32:39+09:00">2020-08-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-08-29 05:51:28" itemprop="dateModified" datetime="2020-08-29T05:51:28+09:00">2020-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%9E%85%EB%AC%B8/" itemprop="url" rel="index"><span itemprop="name">쿠버네티스 입문</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="아래-내용-정리"><a class="markdownIt-Anchor" href="#아래-내용-정리"></a> 아래 내용 정리</h2>
<p>아래 사이트에 정리를 너무 잘해놔서, 나중에 다시 찾아볼 내용만 간추린다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://arisu1000.tistory.com/category/Kubernetes">아리수</a></li>
<li>[쿠버네티스 입문 정리](<a target="_blank" rel="noopener" href="https://kok202.tistory.com/category/%5B%EA%B0%9C%EB%B0%9C%5D">https://kok202.tistory.com/category/[개발]</a> 운영/Kubernetes)</li>
</ul>
<h2 id="책-관련-링크"><a class="markdownIt-Anchor" href="#책-관련-링크"></a> 책 관련 링크</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/dybooksIT/kubernetes-book">repo</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/arisu1000/kubernetes-book-sample">repo, arisu</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dybooksIT/kubernetes-book/blob/master/readme/errata/errata.md">정오표</a></li>
<li><a target="_blank" rel="noopener" href="https://arisu1000.tistory.com/category/Kubernetes">아리수</a></li>
</ul>
<h2 id="쿠버네티스-아키텍쳐"><a class="markdownIt-Anchor" href="#쿠버네티스-아키텍쳐"></a> 쿠버네티스 아키텍쳐</h2>
<ul>
<li>출처: <a target="_blank" rel="noopener" href="https://kok202.tistory.com/285">쿠버네티스 입문 정리 - 00 - 아키텍쳐</a></li>
<li>출처: <a target="_blank" rel="noopener" href="https://arisu1000.tistory.com/27828">아리수, 쿠버네티스(kubernetes) 구성요소</a></li>
</ul>
<p>쿠버네티스는 MSA(마이크로서비스아키텍처, Micoro Service Architecture) 구조로 되어 있습니다.</p>
<ul>
<li>마스터 구성요소</li>
</ul>
<table>
<thead>
<tr>
<th>이름</th>
<th>역활</th>
</tr>
</thead>
<tbody>
<tr>
<td>etcd</td>
<td>고가용성을 제공하는 키-밸류(key-value) 저장소입니다. 쿠베네티스에서 필요한 모든 데이터를 저장하는 실질적인 데이터베이스입니다. etcd는 프로세스 1개만 띄워서 사용할수도 있지만 데이터의 안정성을 위해서는 여러개의 장비에 분산해서 etcd자체를 클러스터링을 구성해서 띄우는게 일반적인 방법입니다. etcd가 안정적이기는 하지만 보다 안정적으로 쿠버네티스를 운영하려면 주기적으로 etcd에 있는 데이터를 백업해 두는게 좋습니다.</td>
</tr>
<tr>
<td>kube-apiserver</td>
<td>쿠버네티스 클러스터의 api를 사용할수 있게 해주는 프로세스입니다. 클러스터로 요청이 왔을때 그 요청이 유효한지 검증하는 역할을 합니다. 쿠버네티스로의 모든 요청은 kube-apiserver를 통해서 다른 곳으로 전달되도록 되어 있습니다. kube-apiserver는 수평적으로 확장이 가능하게 설계가 되어 있어서, 여러대의 장비에 여러개를 띄워놓고 사용할 수 있습니다.</td>
</tr>
<tr>
<td>kube-scheduler</td>
<td>새로운 포드들이 만들어질때 현재 클러스터내에서 자원할당이 가능한 노드들 중에서 알맞은 노드를 선택해서 그곳에 포드를 띄우는 역할을 합니다. 포드는 처음 실행될때 여러가지 조건을 지정해서 실행하는데, kube-scheduler가 그 조건에 맞는 노드를 찾아주는 역할을 합니다. 필요한 하드웨어 요구사항이라던가, 어피니티/안티어피니티(affinity/anti-affinity) 조건을 만족하는지, 특정 데이터가 있는 노드에 할당한다던가 하는 다양한 설정을 할 수 있습니다.</td>
</tr>
<tr>
<td>kube-controller-manager</td>
<td>각각의 컨트롤러들을 실행하는 역할을 합니다. 각 컨트롤러들은 논리적으로는 개별 프로세스이지만 복잡도를 줄이기 위해서 하나의 바이너리 파일로 컴파일되어 있고, 하나의 단일 프로세스로 실행됩니다. 쿠버네티스는 golang언어로 개발되어 있는데, 클러스터내에서 새로운 컨트롤러가 사용될때는 그 컨트롤러에 해당하는 구조체가 만들어진 다음에 그걸 kube-controller-manager가 관리하는 큐에 넣어서 실행하는 방식으로 작동합니다.</td>
</tr>
<tr>
<td>cloud-controller-manager</td>
<td>클라우드 서비스를 제공해 주는 곳들에서 쿠버네티스의 컨트롤러들을 자신들의 서비스와 연계해서 사용하기 위해서 사용합니다. 관련된 코드는 각 클라우드 서비스 제공사들에서 직접 관리하도록 되어 있습니다.</td>
</tr>
</tbody>
</table>
<ul>
<li>노드 구성요소</li>
</ul>
<table>
<thead>
<tr>
<th>이름</th>
<th>역활</th>
</tr>
</thead>
<tbody>
<tr>
<td>kublet</td>
<td>클러스터내의 모든 모드에서 실행되는 에이전트 입니다. 포드내의 컨테이너들이 실행되는걸 직접적으로 관리하는 역할을 합니다. kubelet은 PodSpecs라는 설정을 받아서 그 조건에 맞게 컨테이너를 실행하고 컨테이너가 정상정으로 실행되고 있는지 상태 체크를 진행합니다. 노드안에 있는 컨테이너라고 하더라도 쿠버네티스가 만들지 않은 컨테이너는 관리하지 않습니다.</td>
</tr>
<tr>
<td>kube-proxy</td>
<td>쿠버네티스는 클러스터 내부에 별도의 가상 네트워크를 설정하고 관리합니다.  kube-proxy는 이런 가상 네트워크가 동작할 수 있게 하는 실질적인 역할을 하는 프로세스입니다. 호스트의 네트워크 규칙을 관리하거나 커넥션 포워딩을 하기도 합니다.</td>
</tr>
<tr>
<td>Container Runtime</td>
<td>실제로 컨테이너를 실행시키는 역할을 합니다. 가장 많이 알려진 런타임으로는 도커(Docker)가 있고, 그외 rkt, runc같은 런타임도 지원합니다. 그외에도 컨테이너에 관한 표준을 제정하는 역할을 하는 OCI(Open Container Initiative, <a target="_blank" rel="noopener" href="https://www.opencontainers.org/">https://www.opencontainers.org/</a>)의 런타임 규격(runtime-spec)을 구현하고 있는 컨테이너 런타임이라면 쿠버네티스에서 사용할 수 있습니다.</td>
</tr>
</tbody>
</table>
<ul>
<li>애드온(Addons)</li>
</ul>
<p>애드온은 클러스터 내부에서 필요한 기능들을 위해 실행되는 포드들입니다. 애드온에 사용되는 포드들은 디플로이먼트, 리플리케이션컨트롤러등에 의해 관리됩니다. 애드온이 사용하는 네임스페이스는 kube-system입니다.</p>
<table>
<thead>
<tr>
<th>이름</th>
<th>역활</th>
</tr>
</thead>
<tbody>
<tr>
<td>네트워킹 애드온</td>
<td>클러스터 내부에 가상네트워크를 구성해서 사용하는데, 이때 kuby-proxy이외에 네트워킹 관련한 애드온을 사용합니다. 클라우드 서비스에서 제공하는 쿠버네티스를 사용한다면 별도의 네트워킹 애드온을 사용하지 않더라도 각 클라우드 벤더에서 구현하고 있으니 신경쓰지 않아도 됩니다. 하지만 쿠버네티스를 직접 보유중인 서버들에 설치해서 구성을 하려고 하려면 네트워킹 관련 애드온을 설치해서 사용해야합니다. 이 부분이 쿠버네티스를 직접 설치할때 가장 까다로운 부분이기도 합니다. ACI, Calico, Canal, Cilium, CNI-Genie, Contiv, Falannel, Multus, NSX-T, Nuage, Romana, Weave Net등이 있고, OCI의 CNI(Container Network, Interface) 를 구현하고 있다면 다른 애드온들도 사용할 수 있습니다.</td>
</tr>
<tr>
<td>DNS 애드온</td>
<td>클러스터 내에서 작동하는 DNS 서버입니다. 쿠버네티스 서비스들에 DNS 레코드를 제공하는 역할을 합니다. 쿠버네티스 내부에서 실행된 컨테이너들은 자동으로 DNS서버에 등록됩니다. dns 서비스로는 kube-dns와 core-dns가 있습니다.</td>
</tr>
<tr>
<td>대시보드 애드온</td>
<td></td>
</tr>
<tr>
<td>컨테이너 자원 모니터링</td>
<td>클러스터 내부에서 실행중인 컨테이너의 상태를 모니터링하기 위해서는 cpu, 메모리 같은 필요한 메트릭 데이터들을 시계열형식으로 저장하고 볼수 있는 방법을 제공하는데 필요한 애드온입니다. kubelet안에 cAdvisor라는 컨테이너 모니터링 도구가 포함되어 있는데요. 이 데이터들을 수집해서 사용할 수 있는 메트릭 서버를 이용하면 손쉽게 필요한 데이터들을 수집해서 모니터링에 이용할 수 있습니다.</td>
</tr>
<tr>
<td>클러스터 로깅</td>
<td>클러스터내의 각 개별 컨테이너에서 나오는 로그와 쿠버네티스 구성요소들에서 나오는 로그들을 중앙화된 로그 수집 시스템에 모아서 볼 수 있습니다. 로그를 수집해서 제공해주는 역할로는 ELK(ElasticSearch, Logstash, Kibana)를 많이 사용합니다.</td>
</tr>
</tbody>
</table>
<ul>
<li>네임스페이스</li>
</ul>
<table>
<thead>
<tr>
<th>default</th>
<th>기본 네임스페이스</th>
</tr>
</thead>
<tbody>
<tr>
<td>docker</td>
<td>도커에서 만든 네임스페이스</td>
</tr>
<tr>
<td>kube-system</td>
<td>쿠버네티스 시스템 을 관리하는 네임스페이스. 관리용 파드나 설정이 존재한다.</td>
</tr>
<tr>
<td>kube-public</td>
<td>클러스터 안의 모든 사용자가 읽을 수 있는 네임스페이스 (ex. 클러스터 사용량 정보)</td>
</tr>
<tr>
<td>kube-node-lease</td>
<td>노드의 임대 오브젝들을 관리하는 네임스페이스</td>
</tr>
</tbody>
</table>
<h2 id="설치"><a class="markdownIt-Anchor" href="#설치"></a> 설치</h2>
<h2 id="파드"><a class="markdownIt-Anchor" href="#파드"></a> 파드</h2>
<ul>
<li>
<p>출처: <a target="_blank" rel="noopener" href="https://kok202.tistory.com/286">쿠버네티스 입문 정리 - 01 - Pod</a></p>
</li>
<li>
<p>쿠버네티스의 최소 배포 단위</p>
</li>
<li>
<p>하나의 파드에 여러 개의 컨테이너가 구성될 수 있다.</p>
</li>
</ul>
<h3 id="pod-sample"><a class="markdownIt-Anchor" href="#pod-sample"></a> Pod sample</h3>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: myapp-pod</span><br><span class="line">  labels:</span><br><span class="line">    app: myapp</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - name: myapp-container</span><br><span class="line">    image: busybox</span><br><span class="line">    <span class="built_in">command</span>: [<span class="string">'sh'</span>, <span class="string">'-c'</span>, <span class="string">'echo 안녕하세요 쿠버네티스! &amp;&amp; sleep 3600'</span>]</span><br></pre></td></tr></tbody></table></figure>
<h3 id="파드의-생명주기"><a class="markdownIt-Anchor" href="#파드의-생명주기"></a> 파드의 생명주기</h3>
<table>
<thead>
<tr>
<th>상태</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pending</td>
<td>파드 생성중</td>
</tr>
<tr>
<td>Running</td>
<td>컨테이너 실행중</td>
</tr>
<tr>
<td>Succeeded</td>
<td>컨테이너가 정상 실행 종료</td>
</tr>
<tr>
<td>Failed</td>
<td>컨테이너 비정상 종료</td>
</tr>
<tr>
<td>Unknown</td>
<td>파드 상태를 알 수 없다.</td>
</tr>
</tbody>
</table>
<h3 id="파드의-컨디션-타입"><a class="markdownIt-Anchor" href="#파드의-컨디션-타입"></a> 파드의 컨디션 타입</h3>
<table>
<thead>
<tr>
<th>상태</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>Initialized</td>
<td>모든 초기화 컨테이너가 성공적으로 시작되었다.</td>
</tr>
<tr>
<td>Ready</td>
<td>로드 밸런실 풀에 추가되어야한다.</td>
</tr>
<tr>
<td>ContainersReady</td>
<td>파드 안의 모든 컨테이너가 준비 상태다.</td>
</tr>
<tr>
<td>PodScheduled</td>
<td>파드가 하나의 노드로 스케줄 완료했다.</td>
</tr>
<tr>
<td>Unscheduled</td>
<td>파드가 스케줄 될 수 없다. (ex. 자원 부족)</td>
</tr>
</tbody>
</table>
<h3 id="파드-안의-컨테이너-진단하기"><a class="markdownIt-Anchor" href="#파드-안의-컨테이너-진단하기"></a> 파드 안의 컨테이너 진단하기</h3>
<table>
<thead>
<tr>
<th>상태</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>livenessProbe</td>
<td>컨테이너가 실행됬는지 확인한다. 실패하면 재시작한다.</td>
</tr>
<tr>
<td>readnessProbe</td>
<td>컨테이너가 실행된 후 서비스 요청에 응답할 수 있는지 진단한다.</td>
</tr>
<tr>
<td>readnessProbe</td>
<td>컨테이너가 실행 됬다고 바로 트래픽을 받지 않게 할 수 있고 준비가 완료됬을 때 받을 수 있게 할 수 있다. 애플리케이션의 초기화까지 시간이 걸릴 때 유용하다.</td>
</tr>
</tbody>
</table>
<h3 id="파드-안의-컨테이너-진단하기-핸들러"><a class="markdownIt-Anchor" href="#파드-안의-컨테이너-진단하기-핸들러"></a> 파드 안의 컨테이너 진단하기 핸들러</h3>
<table>
<thead>
<tr>
<th>상태</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>ExecAction</td>
<td>명령의 수행 결과가 0일 때 성공</td>
</tr>
<tr>
<td>TCPSocketAction</td>
<td>IP / Port 가 TCP상태로 열려있으면 성공</td>
</tr>
<tr>
<td>HTTPGetAction</td>
<td>IP / Port / Url 에 Get 요청을 보냈을 때 응답이 2xx, 3xx 이면 성공</td>
</tr>
</tbody>
</table>
<h3 id="pause-컨테이너"><a class="markdownIt-Anchor" href="#pause-컨테이너"></a> Pause 컨테이너</h3>
<ul>
<li>모든 파드에 들어있는 컨테이너</li>
<li>프로세스 식별자(PID)가 1이다. 따라서 pause 컨테이너가 제공하는 네트워크를 공유한다.</li>
<li>pause 컨테이너가 재시작 되면 파드안의 모든 컨테이너가 재시작 된다.</li>
</ul>
<h3 id="스태틱-파드"><a class="markdownIt-Anchor" href="#스태틱-파드"></a> 스태틱 파드</h3>
<ul>
<li>kube-apiserver 를 통하지 않고 kubelet이 직접 실행하는 파드</li>
<li>kube-apiserver 로 파드가 조회는 되지만 명령을 실행할 수는 없다.</li>
<li>kube-apiserver, etcd 와 같은 시스템 파드를 실행하는 용도이다.</li>
<li>지정한 디렉터리(/etc/kubernetes/manifest)에 파드를 넣어두면 kublet이 이를 감지하고 파드로 실행한다.</li>
</ul>
<h3 id="파드의-구성-패턴"><a class="markdownIt-Anchor" href="#파드의-구성-패턴"></a> 파드의 구성 패턴</h3>
<table>
<thead>
<tr>
<th>패턴</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>사이드카 패턴</td>
<td>컨테이너에 추가 기능이 필요하다면 (ex. log) 사이드카 컨테이너를 추가하여 사용한다.</td>
</tr>
<tr>
<td>앰버서더 패턴</td>
<td>파드 안의 프록시 열할을 하는 컨테이너를 추가하는 패턴. (ex. 외부서버에 접근할 때 내부 프록시에 접근하도록 하고 프록시가 알아서 외부 연결을 처리하도록 한다.</td>
</tr>
<tr>
<td>어댑터 패턴</td>
<td>파드 외부로 노출되는 정보는 표준화하는 어댑터 컨테이너를 사용한다.</td>
</tr>
</tbody>
</table>
<h2 id="참고"><a class="markdownIt-Anchor" href="#참고"></a> 참고</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://medium.com/finda-tech/kubernetes-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%A0%95%EB%A6%AC-fccd4fd0ae6">쿠버네티스(Kubernetes) 네트워크 정리</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.google.com/spreadsheets/d/1qCOlor16Wp5mHd6MQxB5gUEQILnijyDLIExEpqmee2k/edit#gid=0">네트워크 플러그인 비교표</a></li>
<li><a target="_blank" rel="noopener" href="https://kubedex.com/kubernetes-network-plugins/">kubedex</a></li>
<li><a target="_blank" rel="noopener" href="https://m.blog.naver.com/alice_k106/221574467441">네트워크 플러그인 별 특징 정리 비교 (Calico, Flannel 등)</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%9E%85%EB%AC%B8/" rel="tag"># 쿠버네티스 입문</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/ckf3rmleb000wk78ogtyi9tqm.html" rel="prev" title="쿠버네티스 도구 모음">
                  <i class="fa fa-chevron-left"></i> 쿠버네티스 도구 모음
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/ckf3rmlfb002sk78o0yqs1c3d.html" rel="next" title="flameshot 를 이용한 화면 캡쳐">
                  flameshot 를 이용한 화면 캡쳐 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  © 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Park Eunjin</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> &amp; <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

      








    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>

  


  















    <div class="pjax">
  

  

  

    </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->


<script src="/bundle.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script></body></html>